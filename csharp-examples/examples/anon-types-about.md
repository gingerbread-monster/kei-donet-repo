# Ключевое слово `var` и анонимные типы
06/10/2020 | C# 8
___
## Ключевое слово `var`
Ключевое слово `var` используется для объявления локальных переменных. Им можно заменить название конкретного типа при объявлении переменной, тем самым неявно типизируя переменную. 

Не следует путать это ключевое слово с аналогичным по названию ключевым словом из JavaScript. В C# неявно типизированная переменная на самом деле строго типизирована, но компилятор сам определяет её тип. Следующие объявления переменных эквивалентны:
```csharp
var i = 10; // Неявная типизация
int x = 10; // Явная типизация
```

Также мы не можем объявить переменную с помощью `var` без её инициализации в той же строке (иначе компилятор не сможет определить её тип). Компилятор определяет тип объявляемой переменной по присваевому значению. Следующий код вызовет ошибку:
```csharp
var i; // ошибка
i = 10;
```

Обычно `var` используется для того чтобы сделать код более компактным, и для того чтобы избежать дублирования названия типа при объявлении переменной или создании нового экземпляра типа.
```csharp
Dictionary<int,string> dictionary1 = new Dictionary<int,string>();
var dictionary2 = new Dictionary<int,string>();
```

Также `var` используется вместе с анонимными типами.

## Анонимные типы
Анонимные типы предоставляют удобный способ инкапсулировать набор `readonly` свойств в единый объект, без необходимости явного объявления нового типа.

Пример создания анонимного типа:
```csharp
var anonObject = new {Name = "Vasya", Age = 25};
``` 

На самом деле данные объекты имеют имена типов, но они генерируются компилятором, и не доступны на уровне исходного кода. Тип каждого из свойтсв также определяется компилятором.

Также мы можем не указывать имя свойства при его инициализации другим свойством. Например:
```csharp
var product = new Product();
var anotherObject = new {Item = "candy", product.Price};

Console.WriteLine(anotherObject.Price);
``` 
В данном случае второе свойство анонимного объекта получит имя свойства которым оно инициализировано. Соответственно к нему можно будет получить доступ вот так: `anotherObject.Price`

## Ещё
- Читайте [подробнее о ключевом слове `var`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/var) на сайте айте документации Microsoft.
- Читайте [подробнее об анонимных типах](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/anonymous-types) на сайте документации Microsoft.